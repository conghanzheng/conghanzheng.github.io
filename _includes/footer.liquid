{% if site.show_footer != false %}
  {% if site.footer_fixed %}
    <footer class="fixed-bottom" role="contentinfo">
      <div class="container mt-0">
        &copy; Copyright {{ site.time | date: '%Y' }}
        {{ site.first_name }}
        {{ site.middle_name }}
        {{ site.last_name }}. {{ site.footer_text }}
        {% if site.impressum_path %}
          <a href="{{ site.url }}{{ site.baseurl }}{{ site.impressum_path }}">Impressum</a>.
        {% endif %}
        {% if site.last_updated %}
          Last updated: {{ 'now' | date: '%B %d, %Y' }}.
        {% endif %}
      </div>
    </footer>
  {% else %}
    <footer class="sticky-bottom mt-5" role="contentinfo">
      <div class="container">
        &copy; Copyright {{ site.time | date: '%Y' }}
        {{ site.first_name }}
        {{ site.middle_name }}
        {{ site.last_name }}. {{ site.footer_text }}
        {% if site.impressum_path %}
          <a href="{{ site.url }}{{ site.baseurl }}{{ site.impressum_path }}">Impressum</a>.
        {% endif %}
        {% if site.last_updated %}
          Last updated: {{ 'now' | date: '%B %d, %Y' }}.
        {% endif %}
      </div>
    </footer>
  {% endif %}
{% endif %}

<!-- Fix for stray </div> tag appearing as text -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Find and remove any text nodes that are exactly '</div>'
    const walk = document.createTreeWalker(
      document.body, 
      NodeFilter.SHOW_TEXT, 
      { 
        acceptNode: function(node) { 
          // Only process text nodes that contain '</div>' and nothing else significant
          return node.textContent.trim() === '</div>' ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
        } 
      }
    );
    
    // Collect nodes to remove
    const nodesToRemove = [];
    while(walk.nextNode()) {
      nodesToRemove.push(walk.currentNode);
    }
    
    // Remove the nodes
    nodesToRemove.forEach(node => {
      node.parentNode.removeChild(node);
    });
  });
</script>